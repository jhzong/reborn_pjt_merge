{% extends "base.html" %}

{% comment %} css ì‘ì—…ì€ ì—¬ê¸°ì„œ í•˜ì„¸ìš”!! {% endcomment %}
{% block css %}
<link rel='stylesheet' href="/static/css/restaurants.css">
{% endblock css %}
{% block style %}
<style>
    a{
        cursor: pointer;
    }
</style>
{% endblock style %}
{% comment %} script ì‘ì—…ì€ ì—¬ê¸°ì„œ í•˜ì„¸ìš”!! {% endcomment %}
{% block script %}
<link rel='stylesheet' href="/static/js/restaurants.js">
<script>
    function searchBtn(){
        searchFrm.submit();
    }//searchBtn()

    function searchPage(page){
        location.href = "/restaurants/reslist/?"+$("#searchFrm").serialize()+"&page="+page;
    }
</script>
{% endblock script %}

{% comment %} body ì‘ì—…ì€ ì—¬ê¸°ì„œ í•˜ì„¸ìš”!! {% endcomment %}
{% block body %}



<form action="/restaurants/reslist/" method="get" id="searchFrm" name="searchFrm">
<div class='rest-header_bg'>
    <div class='rest-header'>
        <div class="search-container">
            <div class="search-box">
                <span class="search-icon"><img src='/static/images/restaurants/search_icon.png'></span>
                <input type="text" name="search" value="{{search}}" placeholder="ê²€ìƒ‰ì–´ë¥¼ ì…ë ¥í•˜ì„¸ìš”."/>
            </div>
            <button class="search-btn" onclick="searchBtn()">ê²€ìƒ‰</button>
        </div>
    </div>
</div>
{% for param in params %}
<input type="hidden" name="{{ param.key }}" value="{{ param.value }}">
{% endfor %}
</form>
<main class="rest_container">

    <!-- ì¹´ë“œ ë¦¬ìŠ¤íŠ¸ -->
    <section class="rest_card-grid">
        {% for r in list %}
        <!-- START -->
        <div class="rest_card" name='{{r.resno}}'><a href="/restaurants/resview/{{r.resno}}/">
            <!-- ìŒì‹ í…Œì´ë¸” ì²«ë²ˆì§¸ í–‰ -->
            {% with fr=r.foodmenu_set.all.0 %}
                <!-- ìŒì‹ ì‚¬ì§„ í…Œì´ë¸” ì²«ë²ˆì§¸ í–‰-->
                {% with img=fr.img_set.all.0 %}
                    {% if img and img.img_url %}
                        <img src="{{ img.img_url }}" alt="{{ r.res_name }}">
                    {% else %}
                        <!-- ì´ë¯¸ì§€ê°€ ì—†ëŠ” ê²½ìš° í‘œì‹œí•  ê¸°ë³¸ ì´ë¯¸ì§€ -->
                        <img src="https://picsum.photos/400/300?{{r.resno}}" alt="ì´ë¯¸ì§€ ì—†ìŒ">
                    {% endif %}
                {% endwith %}
            {% endwith %}
            {% comment %} <img src="https://picsum.photos/400/300?{{r.resno}}"> {% endcomment %}
            <div class="rest_card-body">
                <h3>{{r.res_name}}</h3>
                <p class="rest_category">ì¹´í…Œê³ ë¦¬</p>
                <p class="rest_location">ğŸ“ {{r.addr}}</p>
                <p class="rest_desc">{{r.desc}}</p>
            </div></a>
        </div>
        {% endfor %}
        <!-- END -->
    </section>

</main>
<!-- í˜ì´ì§• -->
<div class="btnAreaList">
    <div class="allPageMoving1">
        <!-- ì´ì „í˜ì´ì§€ -->
        {% if list.has_previous %}
        <a onclick="searchPage(1)" class="n"><img src="/static/images/common/btn_pre2.gif" alt="ì²˜ìŒìœ¼ë¡œ"/></a>
        <a onclick="searchPage({{list.previous_page_number}})" class="pre"><img src="/static/images/common/btn_pre1.gif" alt="ì•í˜ì´ì§€ë¡œ"/></a>
        {% else %}
        <a class="n"><img src="/static/images/common/btn_pre2.gif" alt="ì²˜ìŒìœ¼ë¡œ"/></a>
        <a class="pre"><img src="/static/images/common/btn_pre1.gif" alt="ì•í˜ì´ì§€ë¡œ"/></a>
        {% endif %}
        
        <!-- í˜ì´ì§€ë„˜ë²„ë§-->
        {% for p in list.paginator.page_range %}
            {% if p >= list.number|add:'-3' and p <= list.number|add:'3' %}<!-- ì•ë’¤ í˜ì´ì§€í‘œì‹œ -->
                {% if p == page %}
                <strong>{{p}}</strong>
                {% else %}
                <a onclick="searchPage({{p}})">{{p}}</a>
                {% endif %}
            {% endif %}
        {% endfor %}
        
        <!-- ë‹¤ìŒí˜ì´ì§€-->
        {% if list.has_next %}
        <a onclick="searchPage({{list.next_page_number}})" class="next"><img src="/static/images/common/btn_next1.gif" alt="ë’¤í˜ì´ì§€ë¡œ"/></a>
        <a onclick="searchPage({{list.paginator.num_pages}})" class="n"><img src="/static/images/common/btn_next2.gif" alt="ë§ˆì§€ë§‰í˜ì´ì§€ë¡œ"/></a>
        {% else %}
        <a class="next"><img src="/static/images/common/btn_next1.gif" alt="ë’¤í˜ì´ì§€ë¡œ"/></a>
        <a class="n"><img src="/static/images/common/btn_next2.gif" alt="ë§ˆì§€ë§‰í˜ì´ì§€ë¡œ"/></a>
        {% endif %}
    </div>
</div>

{% endblock body %}
