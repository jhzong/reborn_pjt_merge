<link rel="stylesheet" href="/static/css/searchFilterPop.css" />
<link href="static/css/nouislider.min.css" rel="stylesheet">
<style>
/* --- ìŠ¬ë¼ì´ë” (noUiSlider) ìŠ¤íƒ€ì¼ (ì´ë¯¸ì§€ ê¸°ë°˜) --- */
/* ì—°ê²°ì„  ìƒ‰ìƒ ë³€ê²½ */
.noUi-connect {
    background: #007bff;
}

/* í•¸ë“¤ ëª¨ì–‘ ë‘¥ê¸€ê²Œ ë³€ê²½ */
.noUi-horizontal .noUi-handle {
    border-radius: 50%;
}
</style>
<script src="static/js/nouislider.min.js"></script>
<script>
// ê°€ê²© ì´ˆê¸°ê°’
window.priceInitial = window.priceInitial || { min: 0, max: 1000000 };
// ì‹œê°„ ì´ˆê¸°ê°’ (ì˜ˆì‹œ: 0~24ì‹œ)
window.timeInitialMin = window.timeInitialMin || timeToMinutes("06:00"); // 360
window.timeInitialMax = window.timeInitialMax || timeToMinutes("05:59"); // 1439 + 359 ? (ìŠ¬ë¼ì´ë” ê¸°ì¤€ì— ë§ê²Œ ê³„ì‚°)
// ìˆ¨ê¹€ ì²´í¬í•´ì œ ë“±
window.Utils = window.Utils || {
    uncheckAll(selector) {
        document.querySelectorAll(selector).forEach(cb => cb.checked = false);
    },
    hideAll(selector) {
        document.querySelectorAll(selector).forEach(el => {
            el.classList.add('hidden');
            el.classList.remove('visible');
        });
    }
};
function initModal() {
    // íŒì—…ë‹«ê¸°
    $('.btn-popup-close').on('click', function () {
        $(this).closest('.modal').hide();
        $('body').removeClass('modal-open');
    });
}
//ê²€ìƒ‰í•„í„° ê°œìˆ˜ ì ìš©
function updateFilterCount() {
    // ì²´í¬ëœ í•„í„° ê°œìˆ˜ ê³„ì‚° (ì§€ì—­ + ìŒì‹ ì¢…ë¥˜ + ìš”ì¼ ë“±)
    let count = 0;

    // ì§€ì—­ ì²´í¬ë°•ìŠ¤
    count += $('input[name="locno"]:checked').length;
    // ìƒì„¸ ì§€ì—­ ì²´í¬ë°•ìŠ¤
    $('.detail-group input[type="checkbox"]:checked').each(function(){
        const val = $(this).val();   // value ê°’ ê°€ì ¸ì˜¤ê¸°
        if(val && val !== "") {      // valueê°€ ë¹„ì–´ìˆì§€ ì•Šì€ ì‹¤ì œ ìƒì„¸ ì§€ì—­ë§Œ ì¹´ìš´íŠ¸
            count++;
        }
    });
    // ìŒì‹ ì¢…ë¥˜ ì²´í¬ë°•ìŠ¤
    count += $('input[name="ftypeno"]:checked').length;
    // ìš”ì¼ ì²´í¬ë°•ìŠ¤
    count += $('input[name="weeks"]:checked').length;
    // ê°€ê²© ë²”ìœ„
    const priceMin = parseInt($('#price-min').val());
    const priceMax = parseInt($('#price-max').val());
    if(priceMin !== priceInitial.min || priceMax !== priceInitial.max){
        count += 1;
    }

    // ì‹œê°„ ë²”ìœ„
    const timeMin = parseInt(timeToMinutes($('#time-open').val()));
    const timeMax = parseInt(timeToMinutes($('#time-close').val()));
    if(timeMin !== timeInitialMin || timeMax !== timeInitialMax){
        count += 1;
    }

    const filterCountElem = $('.filter-count');

    //if(count > 2){    // í•„í„°ë¡œ ì¹´ìš´íŠ¸ ë³´ì´ì§€ ì•Šê²Œ í•˜ë ¤ë©´ ê°€ê²©,ì‹œê°„ 2ê°œê¹Œì§€ëŠ” ì ìš©
    if(count > 0){
        filterCountElem.text(count).removeClass('off').addClass('on');
    } else {
        filterCountElem.text('').removeClass('on').addClass('off');
    }
    return count;
}
function setPriceSlider(min, max) {
    document.getElementById('price-min').value = min;
    document.getElementById('price-max').value = max;
    document.getElementById('price-slider').noUiSlider.set([min, max]);
}
function setTimeSlider(open, close) {
    document.getElementById('time-open').value = open;
    document.getElementById('time-close').value = close;
    document.getElementById('time-slider-range').noUiSlider.set([
        timeToMinutes(open),
        timeToMinutes(close)
    ]);
}
//ê°€ê²© ìŠ¬ë¼ì´ë”
function initPriceSlider() {
    var priceSlider = document.getElementById('price-slider'); 
    var priceMinInput = document.getElementById('price-min');
    var priceMaxInput = document.getElementById('price-max');

    noUiSlider.create(priceSlider, {
        start: [priceMinInput.value, priceMaxInput.value], 
        connect: true,      // í•¸ë“¤ ì‚¬ì´ ìƒ‰ìƒ ì±„ìš°ê¸°
        step: 100,         // ì´ë™ ë‹¨ìœ„
        range: {            // ìµœì†Œ, ìµœëŒ€ ë²”ìœ„
            'min': priceInitial.min,
            'max': priceInitial.max
        },
        format: {
            to: function (value) {
                return Math.round(value); // í™”ë©´/inputì— í‘œì‹œí•  ë•Œ
            },
            from: function (value) {
                return value; // ìŠ¬ë¼ì´ë” ê°’ìœ¼ë¡œ ì½ì–´ì˜¬ ë•Œ
            }
        }
    });

    // 3. ìŠ¬ë¼ì´ë” ë³€ê²½ ì‹œ Inputì— ê°’ ì „ë‹¬
    priceSlider.noUiSlider.on('update', function (values, handle) {
        // handle 0 = ì™¼ìª½ í•¸ë“¤, handle 1 = ì˜¤ë¥¸ìª½ í•¸ë“¤
        if (handle === 0) {
            priceMinInput.value = values[0];
        } else {
            priceMaxInput.value = values[1];
        }
    });

    // 4. Input ê°’ì„ ì§ì ‘ ìˆ˜ì •í–ˆì„ ë•Œ ìŠ¬ë¼ì´ë” ì›€ì§ì´ê¸°
    priceMinInput.addEventListener('change', function() {
        priceSlider.noUiSlider.set([this.value, null]);
    });
    priceMaxInput.addEventListener('change', function() {
        priceSlider.noUiSlider.set([null, this.value]);
    });
}
/**
 * 'HH:MM' â†’ ë¶„(ì‹œê°„ ìŠ¬ë¼ì´ë”ì— í´ë˜ìŠ¤ë¡œ ë¬¶ì–´ë„ ë¨)
 * @description 'HH:MM' ë¬¸ìì—´ì„ ì´ 'ë¶„' ë‹¨ìœ„ ìˆ«ìë¡œ ë³€í™˜í•˜ëŠ” í•¨ìˆ˜(ì˜ˆ: "06:00" -> 360)
 * @param {str} time - ë¬¸ìí˜• ì‹œê°„
 * @returns {number} ë¶„ë‹¨ìœ„ìˆ«ì ë°˜í™˜
 */
function timeToMinutes(time) {
    if (typeof time === 'number') {
        return time;
    }

    if (typeof time === 'string' && time.includes(':')) {
        const parts = time.split(':');
        const hours = parseInt(parts[0], 10);
        const mins = parseInt(parts[1], 10);

        let minutes = hours * 60 + mins;
        minutes = minutesToOur(minutes);
        return minutes;
        //return hours * 60 + mins;
    }

    return time;
}
/**
 * ë¶„ â†’ 'HH:MM'(ì‹œê°„ ìŠ¬ë¼ì´ë”ì— í´ë˜ìŠ¤ë¡œ ë¬¶ì–´ë„ ë¨)
 * @description 'ë¶„' ë‹¨ìœ„ ìˆ«ìë¥¼ 'HH:MM' ë¬¸ìì—´ë¡œ ë³€í™˜í•˜ëŠ” í•¨ìˆ˜ (ì˜ˆ: 360 -> "06:00")
 * @param {number} minutes - ë¶„ë‹¨ìœ„ìˆ«ì
 * @returns {str} ë¬¸ìí˜• ì‹œê°„ë°˜í™˜
 */
function minutesToTime(minutes) {
    minutes = minutes % 1440;  // 24ì‹œê°„ ë„˜ì–´ê°€ë©´ ë‹¤ì‹œ 0ë¶€í„°
    var hours = Math.floor(minutes / 60);
    var mins = minutes % 60;
    return ('0' + hours).slice(-2) + ':' + ('0' + mins).slice(-2);
}
/**
 * ì‹œê°„ ìŠ¬ë¼ì´ë”(ì‹œê°„ ìŠ¬ë¼ì´ë”ì— í´ë˜ìŠ¤ë¡œ ë¬¶ì–´ë„ ë¨)
 * @description 00:00 ~ 05:59 ëŠ” ë‹¤ìŒë‚  ì‹œê°„ìœ¼ë¡œ ì²˜ë¦¬í•œë‹¤.
 * @param {number} minutes - ë¶„ë‹¨ìœ„ìˆ«ì
 * @returns {number} ë¶„ë‹¨ìœ„ìˆ«ì ë°˜í™˜
 */
function minutesToOur(minutes){
    if (minutes >= 0 && minutes < 360) {
        return minutes += 1440;
    }
    return minutes;
}
// ì‹œê°„ ìŠ¬ë¼ì´ë”
function initTimeSlider() {
    var timeSlider = document.getElementById('time-slider-range');
    var timeOpenInput = document.getElementById('time-open');
    var timeCloseInput = document.getElementById('time-close');

    noUiSlider.create(timeSlider, {
        start: [timeToMinutes(timeOpenInput.value), timeToMinutes(timeCloseInput.value)],
        connect: true,
        step: 30, // 30ë¶„ ë‹¨ìœ„ë¡œ ì´ë™
        range: {
            'min': timeToMinutes(timeInitialMin),      // 06:00
            'max': timeToMinutes(timeInitialMax)    // 23:59 + 05:00
        },
        format: {
            to: function (value) {
                // ìŠ¬ë¼ì´ë” ìˆ«ì ê°’ì„ 'HH:MM' ë¬¸ìì—´ë¡œ í‘œì‹œ
                return minutesToTime(Math.round(value));
            },
            from: function (value) {
                // 'HH:MM' ë¬¸ìì—´ì„ ìˆ«ì ê°’ìœ¼ë¡œ ë³€í™˜
                return timeToMinutes(value);
            }
        }
    });

    // 3. ìŠ¬ë¼ì´ë” ë³€ê²½ ì‹œ Inputì— ê°’ ì „ë‹¬
    timeSlider.noUiSlider.on('update', function (values, handle) {
        // valuesëŠ” ë¬¸ìì—´ í˜•íƒœì˜ ì‹œê°„("HH:MM")ìœ¼ë¡œ ë°˜í™˜ë©ë‹ˆë‹¤.
        if (handle === 0) {
            timeOpenInput.value = values[0];
        } else {
            timeCloseInput.value = values[1];
        }
    });

    // 4. Input ê°’ì„ ì§ì ‘ ìˆ˜ì •í–ˆì„ ë•Œ ìŠ¬ë¼ì´ë” ì›€ì§ì´ê¸°
    timeOpenInput.addEventListener('change', function() {
        let minutes = timeToMinutes(this.value);
        minutes = minutesToOur(minutes);
        timeSlider.noUiSlider.set([minutes, null]);
    });
    timeCloseInput.addEventListener('change', function() {
        let minutes = timeToMinutes(this.value);
        minutes = minutesToOur(minutes);
        timeSlider.noUiSlider.set([null, minutes]);
    });
}
//ì§€ì—­ ì²´í¬ì‹œ ìƒì„¸ì§€ì—­ ë³´ì´ë„ë¡
function toggleDetailView(clickedCheckbox, isInitial = false) {
    const mainCheckboxes = document.querySelectorAll('input[name="locno"]'); 
    const checkedRegions = Array.from(mainCheckboxes).filter(cb => cb.checked);
    
    // 1. ì²´í¬ í•´ì œ ì‹œ í•˜ìœ„ ì²´í¬ë°•ìŠ¤ ì´ˆê¸°í™”
    if (!isInitial && !clickedCheckbox.checked) {
        const detailGroupId = `details_${clickedCheckbox.id}`;
        const detailGroup = document.getElementById(detailGroupId);
        if (detailGroup) {
            // í•´ë‹¹ í•˜ìœ„ ê·¸ë£¹ ë‚´ì˜ ëª¨ë“  ì²´í¬ë°•ìŠ¤ ì²´í¬ í•´ì œ
            const subCheckboxes = detailGroup.querySelectorAll('input[type="checkbox"]');
            subCheckboxes.forEach(subCb => subCb.checked = false);
        }
    }

    if (!isInitial){
        // 2. ëª¨ë“  ìƒì„¸ ê·¸ë£¹ ìˆ¨ê¸°ê¸°
        Utils.hideAll('.detail-group');
        Utils.uncheckAll('.detail-group input[type="checkbox"]');
    }

    // 3. ì •í™•íˆ 1ê°œì˜ ì§€ì—­ë§Œ ì„ íƒëœ ê²½ìš°, í•´ë‹¹ ìƒì„¸ ê·¸ë£¹ í‘œì‹œ
    if (checkedRegions.length === 1) {
        const uniqueCheckedValue = checkedRegions[0].id;
        const targetDetailGroupId = `details_${uniqueCheckedValue}`;
        const targetDetailGroup = document.getElementById(targetDetailGroupId);
        
        if (targetDetailGroup) {
            targetDetailGroup.classList.remove('hidden');
            targetDetailGroup.classList.add('visible');

            if (!isInitial){
                // ì´ˆê¸° ìƒíƒœ: â€˜ì „ì²´â€™ ì²´í¬ë°•ìŠ¤ ê¸°ë³¸ ì²´í¬
                const checkAll = targetDetailGroup.querySelector('input[type="checkbox"][value=""]');
                if (checkAll) checkAll.checked = true;
            }
        }
    }
    // 4. 0ê°œ ë˜ëŠ” 2ê°œ ì´ìƒ ì„ íƒ ì‹œ (else ê²½ìš°), ëª¨ë“  ìƒì„¸ ê·¸ë£¹ì´ ìˆ¨ê²¨ì§„ ìƒíƒœ ìœ ì§€
}
// ìƒì„¸ ì§€ì—­ ì²´í¬
function initDetailChk() {
    document.querySelectorAll('.detail-group').forEach(group => {
        const all = group.querySelector('input[value=""]');
        const others = [...group.querySelectorAll('input[type="checkbox"]')].filter(cb => cb !== all);

        if (!all) return;

        // ì „ì²´ ì²´í¬ë°•ìŠ¤ í´ë¦­ ì‹œ ë‚˜ë¨¸ì§€ ì²´í¬ë°•ìŠ¤ í•´ì œ
        all.addEventListener('change', () => {
            if (all.checked) others.forEach(cb => cb.checked = false);
        });

        // ë‚˜ë¨¸ì§€ ì²´í¬ë°•ìŠ¤ í´ë¦­ ì‹œ ì „ì²´ ì²´í¬ë°•ìŠ¤ í•´ì œ
        others.forEach(cb => {
            cb.addEventListener('change', () => cb.checked && (all.checked = false));
        });
    });
}
$(document).ready(function() {
    initModal();        //íŒì—…ê´€ë ¨ ë‹«í˜ ë“±
    initPriceSlider();  //ê°€ê²© ìŠ¬ë¼ì´ë”
    initTimeSlider();   //ì‹œê°„ ìŠ¬ë¼ì´ë”
    initDetailChk();    //ì²´í¬ë°•ìŠ¤ ìƒì„¸ì§€ì—­
    const checkedLocs = document.querySelectorAll('input[name="locno"]:checked');
    if (checkedLocs.length === 1) {
        toggleDetailView(checkedLocs[0], true);
    }

    // ì „ì²´í•´ì œ(ì´ˆê¸°í™”)
    $(document).on("click", ".btn-clear-all", function () {
        Utils.uncheckAll('input[name="locno"]');
        Utils.hideAll('.detail-group');
        Utils.uncheckAll('.detail-group input[type="checkbox"]');

        // ê°€ê²©
        setPriceSlider(priceInitial.min, priceInitial.max);
        // ì‹œê°„
        setTimeSlider(timeInitialMin, timeInitialMax);
        // ìš”ì¼
        Utils.uncheckAll('input[name="weeks"]');
        // ìŒì‹
        Utils.uncheckAll('input[name="ftypeno"]');
    });
});
</script>
{% comment %} <div id="modal-filter" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="modalTitle" aria-hidden="true"> {% endcomment %}
  <div class="modal-dialog modal-md" role="document">
    <div class="modal-content">
      <!-- Modal Header -->
      <div class="modal-header">
        <!-- íŒì—… ë‹«ê¸° ë²„íŠ¼ -->
        <h4 class="modal-title" id="modalTitle">ê³ ê¸‰ ê²€ìƒ‰</h4>
        <button type="button" class="btn btn-popup-close pull-right" data-dismiss="modal" aria-label="Close">
          <span>&times;</span>
        </button>
      </div>
      
      <!-- Modal Body -->
      <div class="modal-body">
        <!--<div class="filter-desc">
          í”„ë¦¬ë¯¸ì—„ íšŒì› ì„œë¹„ìŠ¤ì…ë‹ˆë‹¤. <a href="/premium-products"><u>í”„ë¦¬ë¯¸ì—„ íšŒì› ê°€ì…</u></a>
        </div>-->
        
        <!-- ê²€ìƒ‰ì–´ ì…ë ¥ ê·¸ë£¹ -->
        <div class="filter-group">
          <div class="title-bar">
            <div class="title">ë‹¤ìŒ ë‹¨ì–´ë¥¼ í¬í•¨</div>
          </div>
          <div class="filters">
            <div class="r_search-box">
                <input type="text" name="searchResNm" value="{{res_nm|default:''}}" placeholder="ìŒì‹ì  ì´ë¦„ì„ ê²€ìƒ‰í•´ë³´ì„¸ìš”">
            </div>
          </div>
        </div>
        <hr>

        <!-- ì§€ì—­ ì„ íƒ ê·¸ë£¹ -->
        <div class="filter-group">
            <div class="title-bar"><div class="title">ì§€ì—­ì„ íƒ</div></div>
            <div class="filters">
                <div class="multiple-buttons">
                    
                    {% comment %} {% for loc in location %}
                    <div class="checkbox-button">
                        <input type="checkbox" id="zone_{{ loc.locno }}" name="locno" value="{{ loc.locno }}" onchange="toggleDetailView(this)">
                        <label for="zone_{{ loc.locno }}">{{ loc.loc }}</label>
                    </div>
                    {% endfor %} {% endcomment %}
                    {% for loc in location %}
                        <div class="checkbox-button">
                            <input type="checkbox" id="zone_{{ loc.locno }}" name="locno" value="{{ loc.locno }}" onchange="toggleDetailView(this)"
                                {% if loc.locno|stringformat:"s" in checked_locno %}checked{% endif %}>
                            <label for="zone_{{ loc.locno }}">{{ loc.loc }}</label>
                        </div>
                    {% endfor %}

                    {% comment %} {% for loc in location %}
                    <div class="detail-checkbox-container">
                        <div id="details_zone_{{ loc.locno }}" class="detail-group hidden">
                            <label>
                                <input type="checkbox" name="locdno" value="" checked> {{ loc.loc }} ì „ì²´
                            </label>
                            {% for detail in locationDetail %}
                                {% if detail.location.locno == loc.locno %}
                                <label>
                                    <input type="checkbox" name="locdno" value="{{ detail.locdno }}"> {{ detail.locd_nm }}
                                </label>
                                {% endif %}
                            {% endfor %}
                        </div>
                    </div>
                    {% endfor %} {% endcomment %}

                    {% for loc in location %}
                    <div class="detail-checkbox-container">
                        <div id="details_zone_{{ loc.locno }}" class="detail-group hidden">
                            <label>
                                <input type="checkbox" name="locdno" value="" {% if not checked_locdno %}checked{% endif %}> {{ loc.loc }} ì „ì²´
                            </label>
                            {% for detail in locationDetail %}
                                {% if detail.location.locno == loc.locno %}
                                <label>
                                    <input type="checkbox" name="locdno" value="{{ detail.locdno }}"
                                    {% if detail.locdno|stringformat:"s" in checked_locdno %}checked{% endif %}> {{ detail.locd_nm }}
                                </label>
                                {% endif %}
                            {% endfor %}
                        </div>
                    </div>
                    {% endfor %}

                    {% comment %} <!-- ì§€ì—­ ë²„íŠ¼ë“¤ -->
                    <div class="checkbox-button"><input type="checkbox" id="zone_gn" name="loc" value="seoul_gangnam" onchange="toggleDetailView(this)"/><label for="zone_gn">ì„œìš¸ ê°•ë‚¨</label></div>
                    <div class="checkbox-button"><input type="checkbox" id="zone_gb" name="loc" value="seoul_gangbuk" onchange="toggleDetailView(this)"/><label for="zone_gb">ì„œìš¸ ê°•ë¶</label></div>
                    <!-- ...ë‚˜ë¨¸ì§€ ì§€ì—­ ë²„íŠ¼ë“¤... -->

                    <!-- 2. í•˜ìœ„ ìƒì„¸ ì§€ì—­ ì²´í¬ë°•ìŠ¤ ê·¸ë£¹ (ê¸°ë³¸ ìˆ¨ê¹€) -->
                    <div class="detail-checkbox-container">
                        <!-- 'seoul_gangnam' ì§€ì—­ì— í•´ë‹¹í•˜ëŠ” ì²´í¬ë°•ìŠ¤ ê·¸ë£¹ -->
                        <div id="details_zone_gn" class="detail-group hidden">
                            <label><input type="checkbox" name="loc_detail" value="" checked> ì„œìš¸ ê°•ë‚¨ ì „ì²´</label>
                            <label><input type="checkbox" name="loc_detail" value="ê°€ë¡œìˆ˜ê¸¸/ì‹ ì‚¬ì—­"> ê°€ë¡œìˆ˜ê¸¸/ì‹ ì‚¬ì—­</label>
                            <label><input type="checkbox" name="loc_detail" value="ì••êµ¬ì •ë™/ë„ì‚°ê³µì›"> ì••êµ¬ì •ë™/ë„ì‚°ê³µì›</label>
                            <label><input type="checkbox" name="loc_detail" value="ì²­ë‹´ë™/ê°•ë‚¨êµ¬ì²­ì—­"> ì²­ë‹´ë™/ê°•ë‚¨êµ¬ì²­ì—­</label>
                            <label><input type="checkbox" name="loc_detail" value="ë…¼í˜„ë™/ì˜ë™ì‹œì¥"> ë…¼í˜„ë™/ì˜ë™ì‹œì¥</label>
                            <label><input type="checkbox" name="loc_detail" value="ì‚¼ì„±ë™/ëŒ€ì¹˜ë™"> ì‚¼ì„±ë™/ëŒ€ì¹˜ë™</label>
                            <label><input type="checkbox" name="loc_detail" value="ì„ ë¦‰ì—­/ì„ ì •ë¦‰ì—­"> ì„ ë¦‰ì—­/ì„ ì •ë¦‰ì—­</label>
                            <label><input type="checkbox" name="loc_detail" value="ì—­ì‚¼ë™"> ì—­ì‚¼ë™</label>
                            <label><input type="checkbox" name="loc_detail" value="ë„ê³¡/ì–‘ì¬/ë§¤ë´‰"> ë„ê³¡/ì–‘ì¬/ë§¤ë´‰</label>
                            <label><input type="checkbox" name="loc_detail" value="ê°•ë‚¨ì—­"> ê°•ë‚¨ì—­</label>
                            <label><input type="checkbox" name="loc_detail" value="ê³ ì†í„°ë¯¸ë„/ë°˜í¬"> ê³ ì†í„°ë¯¸ë„/ë°˜í¬</label>
                            <label><input type="checkbox" name="loc_detail" value="êµëŒ€/ë‚¨ë¶€í„°ë¯¸ë„/ì„œì´ˆ"> êµëŒ€/ë‚¨ë¶€í„°ë¯¸ë„/ì„œì´ˆ</label>
                            <label><input type="checkbox" name="loc_detail" value="ë™ì‘êµ¬/ëŒ€ë¦¼/ëŒ€ë°©"> ë™ì‘êµ¬/ëŒ€ë¦¼/ëŒ€ë°©</label>
                            <label><input type="checkbox" name="loc_detail" value="ë°©ë°°/ì‚¬ë‹¹/ì´ìˆ˜"> ë°©ë°°/ì‚¬ë‹¹/ì´ìˆ˜</label>
                            <label><input type="checkbox" name="loc_detail" value="ì„œë˜ë§ˆì„"> ì„œë˜ë§ˆì„</label>
                            <label><input type="checkbox" name="loc_detail" value="ì„œìš¸ëŒ€/ê´€ì•…êµ¬"> ì„œìš¸ëŒ€/ê´€ì•…êµ¬</label>
                            <label><input type="checkbox" name="loc_detail" value="ê°€ì‚°ë””ì§€í„¸ë‹¨ì§€/êµ¬ë¡œ"> ê°€ì‚°ë””ì§€í„¸ë‹¨ì§€/êµ¬ë¡œ</label>
                            <label><input type="checkbox" name="loc_detail" value="ì˜ë“±í¬"> ì˜ë“±í¬</label>
                            <label><input type="checkbox" name="loc_detail" value="ì—¬ì˜ë„"> ì—¬ì˜ë„</label>
                            <label><input type="checkbox" name="loc_detail" value="ê¹€í¬/ë§ˆê³¡"> ê¹€í¬/ë§ˆê³¡</label>
                            <label><input type="checkbox" name="loc_detail" value="ëª©ë™/í™”ê³¡"> ëª©ë™/í™”ê³¡</label>
                            <label><input type="checkbox" name="loc_detail" value="ê°œí¬/ì¼ì›/ìˆ˜ì„œ"> ê°œí¬/ì¼ì›/ìˆ˜ì„œ</label>
                            <label><input type="checkbox" name="loc_detail" value="ê°€ë½/ë¬¸ì •/ì˜¤ê¸ˆ/ìœ„ë¡€"> ê°€ë½/ë¬¸ì •/ì˜¤ê¸ˆ/ìœ„ë¡€</label>
                            <label><input type="checkbox" name="loc_detail" value="ì ì‹¤/ë°©ì´/ì˜¬ë¦¼í”½ê³µì›"> ì ì‹¤/ë°©ì´/ì˜¬ë¦¼í”½ê³µì›</label>
                            <label><input type="checkbox" name="loc_detail" value="ì„ì´Œí˜¸ìˆ˜"> ì„ì´Œí˜¸ìˆ˜</label>
                            <label><input type="checkbox" name="loc_detail" value="ê°•ë™êµ¬"> ê°•ë™êµ¬</label>
                        </div>

                        <!-- 'seoul_gangbuk' ì§€ì—­ì— í•´ë‹¹í•˜ëŠ” ì²´í¬ë°•ìŠ¤ ê·¸ë£¹ -->
                        <div id="details_zone_gb" class="detail-group hidden">
                            <label><input type="checkbox" name="loc_detail" value=""> ì„œìš¸ ê°•ë¶ ì „ì²´</label>
                            <label><input type="checkbox" name="loc_detail" value="ë…¸ì›/ê°•ë¶"> ë…¸ì›/ê°•ë¶</label>
                            <label><input type="checkbox" name="loc_detail" value="ë™ëŒ€ë¬¸/ì„±ë™"> ë™ëŒ€ë¬¸/ì„±ë™</label>
                            <!-- ... ê°•ë¶ í•˜ìœ„ ì§€ì—­ë“¤ ... -->
                        </div>
                    </div> {% endcomment %}
                </div>
            </div>
        </div>
        <hr>

        <!-- ìŒì‹ì¢…ë¥˜ -->
        <!-- ìŒì‹ ì¢…ë¥˜ ê·¸ë£¹ (ìƒˆë¡œ ì¶”ê°€ëœ ë‚´ìš©) -->
        <div class="filter-group">
            <div class="title-bar"><div class="title">ìŒì‹ ì¢…ë¥˜</div></div>
            <div class="filters">
                <div class="multiple-buttons">
                    {% comment %} {% for ft in foodType %}
                    <div class="checkbox-button">
                        <input type="checkbox" id="foodtype_{{ ft.ftypeno }}" name="ftypeno" value="{{ ft.ftypeno }}">
                        <label for="foodtype_{{ ft.ftypeno }}">{{ ft.ftype }}</label>
                    </div>
                    {% endfor %} {% endcomment %}
                    {% for ft in foodType %}
                    <div class="checkbox-button">
                        <input type="checkbox" id="foodtype_{{ ft.ftypeno }}" name="ftypeno" value="{{ ft.ftypeno }}"
                            {% if ft.ftypeno|stringformat:"s" in checked_ftypeno %}checked{% endif %}>
                        <label for="foodtype_{{ ft.ftypeno }}">{{ ft.ftype }}</label>
                    </div>
                    {% endfor %}
                    {% comment %} <div class="checkbox-button"><input type="checkbox" id="foodtype_pasta" name="ftype" value="íŒŒìŠ¤íƒ€" /><label for="foodtype_pasta">íŒŒìŠ¤íƒ€</label></div>
                    <div class="checkbox-button"><input type="checkbox" id="foodtype_pizza" name="ftype" value="í”¼ì" /><label for="foodtype_pizza">í”¼ì</label></div>
                    <div class="checkbox-button"><input type="checkbox" id="foodtype_ramen" name="ftype" value="ë¼ë©˜" /><label for="foodtype_ramen">ë¼ë©˜</label></div>
                    <div class="checkbox-button"><input type="checkbox" id="foodtype_jangeo" name="ftype" value="ì¥ì–´" /><label for="foodtype_jangeo">ì¥ì–´</label></div>
                    <div class="checkbox-button"><input type="checkbox" id="foodtype_hanjeongsik" name="ftype" value="í•œì •ì‹" /><label for="foodtype_hanjeongsik">í•œì •ì‹</label></div>
                    <div class="checkbox-button"><input type="checkbox" id="foodtype_hanuomakase" name="ftype" value="í•œìš°ì˜¤ë§ˆì¹´ì„¸" /><label for="foodtype_hanuomakase">í•œìš°ì˜¤ë§ˆì¹´ì„¸</label></div>
                    <div class="checkbox-button"><input type="checkbox" id="foodtype_bangeo" name="ftype" value="ë°©ì–´" /><label for="foodtype_bangeo">ë°©ì–´</label></div>
                    <div class="checkbox-button"><input type="checkbox" id="foodtype_vietnamese" name="ftype" value="ë² íŠ¸ë‚¨ì‹" /><label for="foodtype_vietnamese">ë² íŠ¸ë‚¨ì‹</label></div>
                    <div class="checkbox-button"><input type="checkbox" id="foodtype_cake" name="ftype" value="ì¼€ì´í¬" /><label for="foodtype_cake">ì¼€ì´í¬</label></div>
                    <div class="checkbox-button"><input type="checkbox" id="foodtype_sushi" name="ftype" value="ìŠ¤ì‹œ" /><label for="foodtype_sushi">ìŠ¤ì‹œ</label></div>
                    <div class="checkbox-button"><input type="checkbox" id="foodtype_coffee" name="ftype" value="ì»¤í”¼ì „ë¬¸ì " /><label for="foodtype_coffee">ì»¤í”¼ì „ë¬¸ì </label></div>
                    <div class="checkbox-button"><input type="checkbox" id="foodtype_steak" name="ftype" value="ìŠ¤í…Œì´í¬" /><label for="foodtype_steak">ìŠ¤í…Œì´í¬</label></div>
                    <div class="checkbox-button"><input type="checkbox" id="foodtype_dwaeigalb" name="ftype" value="ë¼ì§€ê°ˆë¹„" /><label for="foodtype_dwaeigalb">ë¼ì§€ê°ˆë¹„</label></div>
                    <div class="checkbox-button"><input type="checkbox" id="foodtype_kalguksu" name="ftype" value="ì¹¼êµ­ìˆ˜" /><label for="foodtype_kalguksu">ì¹¼êµ­ìˆ˜</label></div> {% endcomment %}
                </div>
            </div>
        </div>
        <hr>

        <!-- í‰ê·  ê°€ê²©ëŒ€ ê·¸ë£¹ -->
        <div class="filter-group">
            <div class="title-bar">
                <div class="title">í‰ê·  ê°€ê²©ëŒ€</div>
            </div>
            <div class="filters">
                <div class="price-range-inputs">
                    <div>
                        <label for="price-min" style="display: block; font-size: 12px; color: #999;">ìµœì €</label>
                        <div style="position: relative;">
                            <span style="position: absolute; left: 12px; top: 18px; color: #555;">â‚©</span>
                            <input type="text" id="price-min" name="price_min" class="form-control" value="{{price_min|default:0}}" style="padding-left: 25px;">
                        </div>
                    </div>
                    <span style="margin: 0 10px; line-height: 40px; color: #999;">-</span>
                    <div>
                        <label for="price-max" style="display: block; font-size: 12px; color: #999;">ìµœê³ </label>
                        <div style="position: relative;">
                            <span style="position: absolute; left: 12px; top: 18px; color: #555;">â‚©</span>
                            <input type="text" id="price-max" name="price_max" class="form-control" value="{{price_max|default:1000000}}" style="padding-left: 25px;">
                        </div>
                    </div>
                </div>
                <!-- ê°€ê²© ìŠ¬ë¼ì´ë” ìœ„ì¹˜ (JavaScriptë¡œ êµ¬í˜„ í•„ìš”) -->
                <div id="price-slider" class="noUi-target"></div>
            </div>
        </div>
        <hr>

        <!-- ì˜ì—… ì‹œê°„ ê·¸ë£¹ -->
        <div class="filter-group">
            <div class="title-bar">
                <div class="title">ì˜ì—…ì‹œê°„</div>
            </div>
            <div class="filters">
                <!-- ìš”ì¼ ì„ íƒ ë²„íŠ¼ -->
                <div class="multiple-buttons weekdays" style="margin-bottom: 20px;">
                    {% for day in weekdays %}
                        <div class="checkbox-button">
                            <input type="checkbox" id="day_{{ day }}" name="weeks" value="{{ day }}"
                                {% if day in checked_weeks %}checked{% endif %}>
                            <label for="day_{{ day }}">{{ day }}</label>
                        </div>
                    {% endfor %}
                </div>

                {% comment %} <div class="multiple-buttons weekdays" style="margin-bottom: 20px;">
                    <div class="checkbox-button"><input type="checkbox" id="day_mon" name="weeks" value="ì›”" {% if "ì›”" in checked_weeks %}checked{% endif %}/><label for="day_mon">ì›”</label></div>
                    <div class="checkbox-button"><input type="checkbox" id="day_tue" name="weeks" value="í™”" {% if "í™”" in checked_weeks %}checked{% endif %}/><label for="day_tue">í™”</label></div>
                    <div class="checkbox-button"><input type="checkbox" id="day_wed" name="weeks" value="ìˆ˜" {% if "ìˆ˜" in checked_weeks %}checked{% endif %}/><label for="day_wed">ìˆ˜</label></div>
                    <div class="checkbox-button"><input type="checkbox" id="day_thu" name="weeks" value="ëª©" {% if "ëª©" in checked_weeks %}checked{% endif %}/><label for="day_thu">ëª©</label></div>
                    <div class="checkbox-button"><input type="checkbox" id="day_fri" name="weeks" value="ê¸ˆ" {% if "ê¸ˆ" in checked_weeks %}checked{% endif %}/><label for="day_fri">ê¸ˆ</label></div>
                    <div class="checkbox-button"><input type="checkbox" id="day_sat" name="weeks" value="í† " {% if "í† " in checked_weeks %}checked{% endif %}/><label for="day_sat">í† </label></div>
                    <div class="checkbox-button"><input type="checkbox" id="day_sun" name="weeks" value="ì¼" {% if "ì¼" in checked_weeks %}checked{% endif %}/><label for="day_sun">ì¼</label></div>
                </div> {% endcomment %}
                
                {% comment %} <div class="multiple-buttons weekdays" style="margin-bottom: 20px;">
                    <div class="checkbox-button"><input type="checkbox" id="day_mon" name="weeks" value="ì›”"/><label for="day_mon">ì›”</label></div>
                    <div class="checkbox-button"><input type="checkbox" id="day_tue" name="weeks" value="í™”"/><label for="day_tue">í™”</label></div>
                    <div class="checkbox-button"><input type="checkbox" id="day_wed" name="weeks" value="ìˆ˜"/><label for="day_wed">ìˆ˜</label></div>
                    <div class="checkbox-button"><input type="checkbox" id="day_thu" name="weeks" value="ëª©"/><label for="day_thu">ëª©</label></div>
                    <div class="checkbox-button"><input type="checkbox" id="day_fri" name="weeks" value="ê¸ˆ"/><label for="day_fri">ê¸ˆ</label></div>
                    <div class="checkbox-button"><input type="checkbox" id="day_sat" name="weeks" value="í† "/><label for="day_sat">í† </label></div>
                    <div class="checkbox-button"><input type="checkbox" id="day_sun" name="weeks" value="ì¼"/><label for="day_sun">ì¼</label></div>
                </div> {% endcomment %}

                <!-- ì‹œê°„ ì…ë ¥ ë° ìŠ¬ë¼ì´ë” -->
                <div class="time-range-inputs">
                    <div style="display: flex; align-items: center;">
                        <span style="margin-right: 5px; color: #f7b733; font-size: 18px;">â˜€</span>
                        <div style="position: relative; left: -3px; color: #555;"><i class="fa fa-clock time-icon"></i></div>
                        <input type="text" id="time-open" class="form-control" name="open_time" value="{{ open_time|default:'06:00' }}" style="width: 80px;">
                    </div>
                    <span style="margin: 0 10px; line-height: 40px; color: #999;">-</span>
                    <div style="display: flex; align-items: center;">
                        <div style="position: relative; left: -3px; color: #555;"><i class="fa fa-clock time-icon"></i></div>
                        <input type="text" id="time-close" class="form-control" name="close_time" value="{{close_time|default:'05:59'}}" style="width: 80px;">
                        <span style="margin-left: 5px; color: #f7b733; font-size: 18px;">â˜¾</span>
                    </div>
                </div>
                
                <!-- ì‹œê°„ ìŠ¬ë¼ì´ë” ìœ„ì¹˜ (JavaScriptë¡œ êµ¬í˜„ í•„ìš”) -->
                {% comment %} <div id="time-slider-range" class="noUi-target"></div> {% endcomment %}
                <div class="time-slider-wrapper">
                    <!-- ì‹œê°„ ìŠ¬ë¼ì´ë” ìœ„ì¹˜ (JavaScriptë¡œ êµ¬í˜„ í•„ìš”) -->
                    <div id="time-slider-range"></div>

                    <!-- ë§ˆì»¤ -->
                    <div class="time-markers">
                        <div class="marker" style="left:0%">
                            <div class="line"></div>
                            <div class="label">â˜€ 06:00</div>
                        </div>

                        <div class="marker" id="midnight-marker" style="left:75%">
                            <div class="line"></div>
                            <div class="label">ğŸŒ™ 24:00</div>
                        </div>

                        <div class="marker" style="left:100%">
                            <div class="line"></div>
                            <div class="label">â˜¾ 05:59</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <br>
        <hr>

      </div>
      
      <!-- Modal Footer -->
      <div class="modal-footer">
        <button class="btn-clear-all" type="button">ì „ì²´ í•´ì œ</button>
        <button class="btn-apply-filter" type="button">í•„í„° ì ìš©</button>
      </div>
    </div>
  </div>
{% comment %} </div> {% endcomment %}